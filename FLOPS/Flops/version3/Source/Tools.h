/* Tools.h
 * 
 * Author           : Alexander J. Yee
 * Date Created     : 06/05/2017
 * Last Modified    : 06/05/2017
 * 
 */

#ifndef _flops_Tools_H
#define _flops_Tools_H
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
//  Dependencies
#include <stdint.h>
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
//  rdtsc
#if _WIN32
#include <intrin.h>
namespace Flops{
    uint64_t rdtsc(){
        return __rdtsc();
    }
}
#else
namespace Flops{
    uint64_t rdtsc(){
        unsigned int lo, hi;
        __asm__ volatile ("rdtsc" : "=a" (lo), "=d" (hi));
        return ((uint64_t)hi << 32) | lo;
    }
}
#endif
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
#endif
